
<!DOCTYPE html>


<html lang="en" data-content_root="./" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Análisis exploratorio - ESG &#8212; My sample book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css?v=be8a1c11" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="_static/sphinx-design.min.css?v=95c83b7e" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="_static/doctools.js?v=9a2dae69"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="_static/copybutton.js?v=f281be69"></script>
    <script src="_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="_static/design-tabs.js?v=f930bc37"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'EDA-ESG[1]';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="MODELOS DE REGRESIÓN PARA LA PREDICCIÓN" href="modelos_retornos%5B1%5D.html" />
    <link rel="prev" title="Librerías" href="prueba.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="intro.html">
  
  
  
  
  
    
    
      
    
    
    <img src="_static/logo.png" class="logo__image only-light" alt="My sample book - Home"/>
    <script>document.write(`<img src="_static/logo.png" class="logo__image only-dark" alt="My sample book - Home"/>`);</script>
  
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="intro.html">
                    PROYECTO FINAL
                </a>
            </li>
        </ul>
        <ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="prueba.html">Librerías</a></li>


<li class="toctree-l1 current active"><a class="current reference internal" href="#"><strong>Análisis exploratorio - ESG</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="modelos_retornos%5B1%5D.html"><strong>MODELOS DE REGRESIÓN PARA LA PREDICCIÓN</strong></a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-source-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Source repositories">
    <i class="fab fa-github"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book" target="_blank"
   class="btn btn-sm btn-source-repository-button dropdown-item"
   title="Source repository"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="btn__text-container">Repository</span>
</a>
</li>
      
      
      
      
      <li><a href="https://github.com/executablebooks/jupyter-book/issues/new?title=Issue%20on%20page%20%2FEDA-ESG[1].html&body=Your%20issue%20content%20here." target="_blank"
   class="btn btn-sm btn-source-issues-button dropdown-item"
   title="Open an issue"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="btn__text-container">Open issue</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/EDA-ESG[1].ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm pst-navbar-icon search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Análisis exploratorio - ESG</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#librerias-y-modulos">Librerías y módulos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contextualizacion-de-la-base-de-datos">Contextualización de la base de datos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-las-variables">Análisis de las variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deteccion-de-datos-faltantes-na">Detección de datos faltantes (NA)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deteccion-de-valores-atipicos">Detección de valores atípicos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-multicolinealidad">Análisis de multicolinealidad</a></li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section class="tex2jax_ignore mathjax_ignore" id="analisis-exploratorio-esg">
<h1><strong>Análisis exploratorio - ESG</strong><a class="headerlink" href="#analisis-exploratorio-esg" title="Link to this heading">#</a></h1>
<section id="librerias-y-modulos">
<h2>Librerías y módulos<a class="headerlink" href="#librerias-y-modulos" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="nn">plt</span>
<span class="kn">from</span> <span class="nn">scipy.stats</span> <span class="kn">import</span> <span class="n">shapiro</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">OneHotEncoder</span>
<span class="kn">from</span> <span class="nn">statsmodels.tools.tools</span> <span class="kn">import</span> <span class="n">add_constant</span>
<span class="kn">from</span> <span class="nn">statsmodels.stats.outliers_influence</span> <span class="kn">import</span> <span class="n">variance_inflation_factor</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="contextualizacion-de-la-base-de-datos">
<h2>Contextualización de la base de datos<a class="headerlink" href="#contextualizacion-de-la-base-de-datos" title="Link to this heading">#</a></h2>
<p>En primer lugar, procederemos a importar la base de datos anteriormente filtrada.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;C:/Users/valcd/OneDrive/Escritorio/esg_risk.csv&#39;</span><span class="p">)</span>
<span class="n">esg</span> 
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Name</th>
      <th>Address</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>Full Time Employees</th>
      <th>Description</th>
      <th>Total ESG Risk score</th>
      <th>Environment Risk Score</th>
      <th>Governance Risk Score</th>
      <th>Social Risk Score</th>
      <th>Controversy Level</th>
      <th>Controversy Score</th>
      <th>ESG Risk Percentile</th>
      <th>ESG Risk Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ENPH</td>
      <td>Enphase Energy, Inc.</td>
      <td>47281 Bayside Parkway\nFremont, CA 94538\nUnit...</td>
      <td>Technology</td>
      <td>Solar</td>
      <td>3,157</td>
      <td>Enphase Energy, Inc., together with its subsid...</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1</th>
      <td>EMN</td>
      <td>Eastman Chemical Company</td>
      <td>200 South Wilcox Drive\nKingsport, TN 37662\nU...</td>
      <td>Basic Materials</td>
      <td>Specialty Chemicals</td>
      <td>14,000</td>
      <td>Eastman Chemical Company operates as a special...</td>
      <td>25.3</td>
      <td>12.8</td>
      <td>6.6</td>
      <td>5.8</td>
      <td>Moderate Controversy Level</td>
      <td>2.0</td>
      <td>50th percentile</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>2</th>
      <td>DPZ</td>
      <td>Domino's Pizza Inc.</td>
      <td>30 Frank Lloyd Wright Drive\nAnn Arbor, MI 481...</td>
      <td>Consumer Cyclical</td>
      <td>Restaurants</td>
      <td>6,500</td>
      <td>Domino's Pizza, Inc., through its subsidiaries...</td>
      <td>29.2</td>
      <td>10.6</td>
      <td>6.3</td>
      <td>12.2</td>
      <td>Moderate Controversy Level</td>
      <td>2.0</td>
      <td>66th percentile</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>3</th>
      <td>DVA</td>
      <td>Davita Inc.</td>
      <td>2000 16th Street\nDenver, CO 80202\nUnited States</td>
      <td>Healthcare</td>
      <td>Medical Care Facilities</td>
      <td>70,000</td>
      <td>DaVita Inc. provides kidney dialysis services ...</td>
      <td>22.6</td>
      <td>0.1</td>
      <td>8.4</td>
      <td>14.1</td>
      <td>Moderate Controversy Level</td>
      <td>2.0</td>
      <td>38th percentile</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>4</th>
      <td>DRI</td>
      <td>Darden Restaurants, Inc.</td>
      <td>1000 Darden Center Drive\nOrlando, FL 32837\nU...</td>
      <td>Consumer Cyclical</td>
      <td>Restaurants</td>
      <td>187,384</td>
      <td>Darden Restaurants, Inc., together with its su...</td>
      <td>27.5</td>
      <td>7.9</td>
      <td>4.6</td>
      <td>15.0</td>
      <td>Moderate Controversy Level</td>
      <td>2.0</td>
      <td>59th percentile</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>458</th>
      <td>ACN</td>
      <td>Accenture Plc</td>
      <td>1 Grand Canal Square\nGrand Canal Harbour\nDub...</td>
      <td>Technology</td>
      <td>Information Technology Services</td>
      <td>742,000</td>
      <td>Accenture plc, a professional services company...</td>
      <td>9.8</td>
      <td>0.8</td>
      <td>4.4</td>
      <td>4.6</td>
      <td>Moderate Controversy Level</td>
      <td>2.0</td>
      <td>3rd percentile</td>
      <td>Negligible</td>
    </tr>
    <tr>
      <th>459</th>
      <td>ABBV</td>
      <td>Abbvie Inc.</td>
      <td>1 North Waukegan Road\nNorth Chicago, IL 60064...</td>
      <td>Healthcare</td>
      <td>Drug Manufacturers - General</td>
      <td>50,000</td>
      <td>AbbVie Inc. discovers, develops, manufactures,...</td>
      <td>29.9</td>
      <td>2.4</td>
      <td>10.4</td>
      <td>17.2</td>
      <td>Significant Controversy Level</td>
      <td>3.0</td>
      <td>69th percentile</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>460</th>
      <td>ABT</td>
      <td>Abbott Laboratories</td>
      <td>100 Abbott Park Road\nAbbott Park\nNorth Chica...</td>
      <td>Healthcare</td>
      <td>Medical Devices</td>
      <td>114,000</td>
      <td>Abbott Laboratories, together with its subsidi...</td>
      <td>24.8</td>
      <td>2.3</td>
      <td>8.3</td>
      <td>14.2</td>
      <td>Significant Controversy Level</td>
      <td>3.0</td>
      <td>48th percentile</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>461</th>
      <td>AOS</td>
      <td>A.O. Smith Corporation</td>
      <td>11270 West Park Place\nSuite 170 PO Box 245008...</td>
      <td>Industrials</td>
      <td>Specialty Industrial Machinery</td>
      <td>12,000</td>
      <td>A. O. Smith Corporation manufactures and marke...</td>
      <td>25.4</td>
      <td>7.2</td>
      <td>6.4</td>
      <td>11.9</td>
      <td>Low Controversy Level</td>
      <td>1.0</td>
      <td>51st percentile</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>462</th>
      <td>MMM</td>
      <td>3m Company</td>
      <td>3M Center\nSaint Paul, MN 55144-1000\nUnited S...</td>
      <td>Industrials</td>
      <td>Conglomerates</td>
      <td>85,000</td>
      <td>3M Company provides diversified technology ser...</td>
      <td>37.3</td>
      <td>17.2</td>
      <td>6.5</td>
      <td>13.6</td>
      <td>Severe Controversy Level</td>
      <td>5.0</td>
      <td>89th percentile</td>
      <td>High</td>
    </tr>
  </tbody>
</table>
<p>463 rows × 15 columns</p>
</div></div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="o">.</span><span class="n">shape</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>(463, 15)
</pre></div>
</div>
</div>
</div>
<p>La base de datos, titulada originalmente <strong>SP 500 ESG Risk Ratings</strong>, contiene <code class="docutils literal notranslate"><span class="pre">463</span></code> observaciones que corresponden a diversas compañías pertenecientes al índice S&amp;P 500. Está compuesta por <code class="docutils literal notranslate"><span class="pre">15</span></code> columnas, las cuales representan distintas características o aspectos específicos de cada empresa, con un enfoque principal en factores ESG. Estas incluyen puntajes en dimensiones ambientales, sociales y de gobernanza, además de una calificación global y otros indicadores relevantes.</p>
<p>Para ofrecer un mayor contexto, los criterios ESG son aquellos que los inversores consideran al evaluar una empresa antes de tomar decisiones de inversión. Estas siglas hacen referencia a los conceptos de <strong>Environmental</strong> (Medioambiental), <strong>Social</strong> (Social) y <strong>Governance</strong> (Gobernanza), cada uno de los cuales evalúa:</p>
<ul class="simple">
<li><p><strong>Environmental</strong>: El impacto ambiental de la empresa, ya sea de forma directa o indirecta.</p></li>
<li><p><strong>Social</strong>: El impacto social que la empresa tiene en su entorno.</p></li>
<li><p><strong>Governance</strong>: El gobierno corporativo y la estructura de liderazgo de la empresa.</p></li>
</ul>
<p>Ahora, para seguir con nuestro análisis, veamos en qué consiste cada una de las variables que conforman a este conjunto de datos.</p>
<ul class="simple">
<li><p><strong>Symbol</strong>: El símbolo bursátil único asociado con la empresa.</p></li>
<li><p><strong>Name</strong>: El nombre oficial de la empresa.</p></li>
<li><p><strong>Address</strong>: La dirección principal de la sede de la empresa.</p></li>
<li><p><strong>Sector</strong>: El sector de la economía en el que opera la empresa.</p></li>
<li><p><strong>Industry</strong>: La industria específica a la que pertenece la empresa.</p></li>
<li><p><strong>Full Time Employees</strong>: Recuento total de empleados a tiempo completo que trabajan dentro de la empresa.</p></li>
<li><p><strong>Description</strong>: Una descripción general concisa del negocio y las actividades principales de la empresa.</p></li>
<li><p><strong>Total ESG Risk score</strong>: Puntuación agregada que evalúa el riesgo ESG general de la empresa.</p></li>
<li><p><strong>Environment Risk Score</strong>: Puntuación que indica la sostenibilidad y el impacto ambiental de la empresa.</p></li>
<li><p><strong>Governance Risk Score</strong>: Puntuación que refleja la calidad de la estructura de gobernanza de la empresa.</p></li>
<li><p><strong>Social Risk Score</strong>: Puntuación que evalúa las prácticas de la empresa relacionadas con la sociedad y los empleados.</p></li>
<li><p><strong>Controversy Level</strong>: El nivel de controversias asociadas con las prácticas ESG de la empresa.</p></li>
<li><p><strong>Controversy Score</strong>: Representación numérica del alcance de las controversias relacionadas con ESG.</p></li>
<li><p><strong>ESG Risk Percentile</strong>: Clasificación de la empresa en términos de riesgo ESG en comparación con otras.</p></li>
<li><p><strong>ESG Risk Level</strong>: Indicación categórica del nivel de riesgo ESG de la empresa.</p></li>
</ul>
<p>Y de qué tipo son.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="o">.</span><span class="n">info</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
RangeIndex: 463 entries, 0 to 462
Data columns (total 15 columns):
 #   Column                  Non-Null Count  Dtype  
---  ------                  --------------  -----  
 0   Symbol                  463 non-null    object 
 1   Name                    463 non-null    object 
 2   Address                 463 non-null    object 
 3   Sector                  463 non-null    object 
 4   Industry                463 non-null    object 
 5   Full Time Employees     459 non-null    object 
 6   Description             463 non-null    object 
 7   Total ESG Risk score    412 non-null    float64
 8   Environment Risk Score  412 non-null    float64
 9   Governance Risk Score   412 non-null    float64
 10  Social Risk Score       412 non-null    float64
 11  Controversy Level       412 non-null    object 
 12  Controversy Score       386 non-null    float64
 13  ESG Risk Percentile     412 non-null    object 
 14  ESG Risk Level          412 non-null    object 
dtypes: float64(5), object(10)
memory usage: 54.4+ KB
</pre></div>
</div>
</div>
</div>
<p>Es decir, entre las <code class="docutils literal notranslate"><span class="pre">15</span></code> variables, solo <code class="docutils literal notranslate"><span class="pre">5</span></code> de ellas son de tipo numérico.</p>
<p>Pasemos entonces a analizar cada una de estas.</p>
</section>
<section id="analisis-de-las-variables">
<h2>Análisis de las variables<a class="headerlink" href="#analisis-de-las-variables" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><strong>Symbol</strong></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total de valores únicos en la columna &#39;Symbol&#39;: </span><span class="si">{</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Symbol&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Symbol&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total de valores únicos en la columna &#39;Symbol&#39;: 463
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0      ENPH
1       EMN
2       DPZ
3       DVA
4       DRI
       ... 
458     ACN
459    ABBV
460     ABT
461     AOS
462     MMM
Name: Symbol, Length: 463, dtype: object
</pre></div>
</div>
</div>
</div>
<p>Esto indica que todos los valores de esta columna son únicos, lo que nos permite afirmar que cada empresa cuenta con su propio símbolo bursátil, tal como se anticipaba.</p>
<ul class="simple">
<li><p><strong>Name</strong></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Total de valores únicos en la columna &#39;Name&#39;: </span><span class="si">{</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Name&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Total de valores únicos en la columna &#39;Name&#39;: 463
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>0          Enphase Energy, Inc.
1      Eastman Chemical Company
2           Domino&#39;s Pizza Inc.
3                   Davita Inc.
4      Darden Restaurants, Inc.
                 ...           
458               Accenture Plc
459                 Abbvie Inc.
460         Abbott Laboratories
461      A.O. Smith Corporation
462                  3m Company
Name: Name, Length: 463, dtype: object
</pre></div>
</div>
</div>
</div>
<p>En concordancia con lo obtenido anteriormente, se confirma que no hay ninguna empresa repetida.</p>
<ul class="simple">
<li><p><strong>Address</strong></p></li>
</ul>
<p>Esta variable será eliminada pues no revela información de interés para nuestro estudio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Address&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>Sector</strong></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;La cantidad total de sectores es </span><span class="si">{</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Sector&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

<span class="n">sectorep</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Sector&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sectorep</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Frecuencia de Cada Sector&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Sector&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Cantidad de Empresas&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">sectorep</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sectorep</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>La cantidad total de sectores es 11
</pre></div>
</div>
<img alt="_images/8b9d852dcc4742602d66864635dc0801123c784b2ee6c716e6504c741be46a72.png" src="_images/8b9d852dcc4742602d66864635dc0801123c784b2ee6c716e6504c741be46a72.png" />
</div>
</div>
<p>A partir de estos resultados, podemos concluir que los sectores predominantes son <strong>Industrials</strong> (Acciones industriales) y <strong>Technology</strong> (Tecnología), con frecuencias de <code class="docutils literal notranslate"><span class="pre">69</span></code> y <code class="docutils literal notranslate"><span class="pre">65</span></code> empresas, respectivamente. Por otro lado, se observa que los sectores <strong>Energy</strong> (Energía), <strong>Basic Materials</strong> (Materiales básicos), y <strong>Communication Services</strong> (Servicios de comunicación) tienen frecuencias bastante cercanas entre sí, siendo las más bajas con <code class="docutils literal notranslate"><span class="pre">20</span></code>, <code class="docutils literal notranslate"><span class="pre">21</span></code> y <code class="docutils literal notranslate"><span class="pre">22</span></code> empresas, respectivamente. Esto indica que estos sectores son los que presentan menor representación en nuestro conjunto de datos.</p>
<ul class="simple">
<li><p><strong>Industry</strong></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;La cantidad total de industrias es </span><span class="si">{</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Industry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>La cantidad total de industrias es 112
</pre></div>
</div>
</div>
</div>
<p>Dado que representar una cantidad tan amplia de datos de manera gráfica puede resultar complejo estéticamente hablando, en esta ocasión nos enfocaremos exclusivamente en las 20 industrias más comunes y las 20 menos comunes de nuestro conjunto de datos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">industryrep</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Industry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="n">indu20top</span><span class="o">=</span> <span class="n">industryrep</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">indu20bottom</span> <span class="o">=</span> <span class="n">industryrep</span><span class="o">.</span><span class="n">tail</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>

<span class="n">combined</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">indu20top</span><span class="p">,</span> <span class="n">indu20bottom</span><span class="p">])</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>
<span class="n">combined</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;barh&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>

<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Industrias: 20 Más Comunes y 20 Menos Comunes&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Cantidad de Empresas&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Industria&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">combined</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">v</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">i</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/00b9cd06b78c300b82511eef054c8b3a62659d61cc332a12079774688f5d2581.png" src="_images/00b9cd06b78c300b82511eef054c8b3a62659d61cc332a12079774688f5d2581.png" />
</div>
</div>
<p>A partir de este diagrama de barras, podemos observar que a pesar de la diversidad de industrias, en términos de frecuencia, la mayoría de ellas se concentran en un rango limitado. Por ejemplo, la industria <strong>Utilities - Regulated Electric</strong> (Servicios públicos - Electricidad regulada) destaca con <code class="docutils literal notranslate"><span class="pre">22</span></code> empresas, mientras que las frecuencias de las demás industrias oscilan principalmente entre <code class="docutils literal notranslate"><span class="pre">1</span></code> y <code class="docutils literal notranslate"><span class="pre">10</span></code>, con pocos casos que superan esa cifra. Esto indica que, a pesar de la variedad de industrias representadas, la distribución de empresas no es altamente variada, ya que varias de ellas tienen frecuencias similares o incluso iguales.</p>
<ul class="simple">
<li><p><strong>Sector e Industry</strong></p></li>
</ul>
<p>Veamos ahora, cuántas industrias hay en cada sector de operación basado en nuestra base de datos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg2</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[[</span><span class="s1">&#39;Sector&#39;</span><span class="p">,</span> <span class="s1">&#39;Industry&#39;</span><span class="p">]]</span> <span class="c1"># Dataframe con solo estas dos variables</span>

<span class="n">indu_sector</span> <span class="o">=</span> <span class="n">esg2</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Sector&#39;</span><span class="p">)[</span><span class="s1">&#39;Industry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span> <span class="c1"># Cantidad de industrias en cada sector</span>

<span class="n">indu_sector</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sector&#39;</span><span class="p">,</span> <span class="s1">&#39;Cantidad de Industrias&#39;</span><span class="p">]</span> <span class="c1"># Columnas en la tabla</span>

<span class="n">tabla1</span> <span class="o">=</span> <span class="n">indu_sector</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;width: 80%; margin: auto;&quot;&#39;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;Cantidad de Industrias por Sector&quot;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">set_table_styles</span><span class="p">([{</span>
         <span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;th&#39;</span><span class="p">,</span>
         <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;background-color&#39;</span><span class="p">,</span> <span class="s1">&#39;lightgray&#39;</span><span class="p">)]</span>
         <span class="p">},</span> <span class="p">{</span>
         <span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;td&#39;</span><span class="p">,</span>
         <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;padding&#39;</span><span class="p">,</span> <span class="s1">&#39;10px&#39;</span><span class="p">)]</span>
         <span class="p">}])</span>

<span class="n">display</span><span class="p">(</span><span class="n">tabla1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_b8ac2 th {
  background-color: lightgray;
}
#T_b8ac2 td {
  padding: 10px;
}
#T_b8ac2_row0_col1 {
  background-color: #dbe9f6;
  color: #000000;
}
#T_b8ac2_row1_col1, #T_b8ac2_row4_col1 {
  background-color: #f7fbff;
  color: #000000;
}
#T_b8ac2_row2_col1 {
  background-color: #08306b;
  color: #f1f1f1;
}
#T_b8ac2_row3_col1, #T_b8ac2_row5_col1, #T_b8ac2_row9_col1 {
  background-color: #89bedc;
  color: #000000;
}
#T_b8ac2_row6_col1 {
  background-color: #a4cce3;
  color: #000000;
}
#T_b8ac2_row7_col1 {
  background-color: #084387;
  color: #f1f1f1;
}
#T_b8ac2_row8_col1 {
  background-color: #bad6eb;
  color: #000000;
}
#T_b8ac2_row10_col1 {
  background-color: #e9f2fa;
  color: #000000;
}
</style>
<table id="T_b8ac2" style="width: 80%; margin: auto;">
  <caption>Cantidad de Industrias por Sector</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_b8ac2_level0_col0" class="col_heading level0 col0" >Sector</th>
      <th id="T_b8ac2_level0_col1" class="col_heading level0 col1" >Cantidad de Industrias</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_b8ac2_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_b8ac2_row0_col0" class="data row0 col0" >Basic Materials</td>
      <td id="T_b8ac2_row0_col1" class="data row0 col1" >7</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_b8ac2_row1_col0" class="data row1 col0" >Communication Services</td>
      <td id="T_b8ac2_row1_col1" class="data row1 col1" >5</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_b8ac2_row2_col0" class="data row2 col0" >Consumer Cyclical</td>
      <td id="T_b8ac2_row2_col1" class="data row2 col1" >19</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_b8ac2_row3_col0" class="data row3 col0" >Consumer Defensive</td>
      <td id="T_b8ac2_row3_col1" class="data row3 col1" >11</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_b8ac2_row4_col0" class="data row4 col0" >Energy</td>
      <td id="T_b8ac2_row4_col1" class="data row4 col1" >5</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_b8ac2_row5_col0" class="data row5 col0" >Financial Services</td>
      <td id="T_b8ac2_row5_col1" class="data row5 col1" >11</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row6" class="row_heading level0 row6" >6</th>
      <td id="T_b8ac2_row6_col0" class="data row6 col0" >Healthcare</td>
      <td id="T_b8ac2_row6_col1" class="data row6 col1" >10</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row7" class="row_heading level0 row7" >7</th>
      <td id="T_b8ac2_row7_col0" class="data row7 col0" >Industrials</td>
      <td id="T_b8ac2_row7_col1" class="data row7 col1" >18</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row8" class="row_heading level0 row8" >8</th>
      <td id="T_b8ac2_row8_col0" class="data row8 col0" >Real Estate</td>
      <td id="T_b8ac2_row8_col1" class="data row8 col1" >9</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row9" class="row_heading level0 row9" >9</th>
      <td id="T_b8ac2_row9_col0" class="data row9 col0" >Technology</td>
      <td id="T_b8ac2_row9_col1" class="data row9 col1" >11</td>
    </tr>
    <tr>
      <th id="T_b8ac2_level0_row10" class="row_heading level0 row10" >10</th>
      <td id="T_b8ac2_row10_col0" class="data row10 col0" >Utilities</td>
      <td id="T_b8ac2_row10_col1" class="data row10 col1" >6</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">indu_sect</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Sector&#39;</span><span class="p">)[</span><span class="s1">&#39;Industry&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">nunique</span><span class="p">()</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

<span class="c1"># Crear un gráfico de barras</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">indu_sect</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Cantidad de Industrias por Sector&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Sector&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Número de Industrias&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xticks</span><span class="p">(</span><span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="c1"># Añadir etiquetas a las barras</span>
<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">indu_sect</span><span class="p">):</span>
    <span class="n">plt</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="o">+</span> <span class="mf">0.1</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c99edab18210e280743d4d707eaec55d234723a709b4c7d1392372a4805392e2.png" src="_images/c99edab18210e280743d4d707eaec55d234723a709b4c7d1392372a4805392e2.png" />
</div>
</div>
<p>Los sectores que presentan mayor diversidad de industrias son <strong>Consumer Cyclical</strong> (Consumo Cíclico) e <strong>Industrials</strong> (Acciones Industriales), con un total de <code class="docutils literal notranslate"><span class="pre">19</span></code> y <code class="docutils literal notranslate"><span class="pre">18</span></code> industrias diferentes, respectivamente. Por otro lado, los sectores con menor variabilidad son <strong>Communication Services</strong> (Servicios de Comunicación) y <strong>Energy</strong> (Energía), que cuentan únicamente con <code class="docutils literal notranslate"><span class="pre">5</span></code> industrias distintas cada uno.</p>
<p>Esto sugiere que, en términos generales, la cantidad de industrias variadas entre los sectores no es considerable, ya que, de un total de <code class="docutils literal notranslate"><span class="pre">112</span></code> industrias, la mayor variabilidad es de solo <code class="docutils literal notranslate"><span class="pre">19</span></code>, lo que representa aproximadamente solo un <code class="docutils literal notranslate"><span class="pre">17%</span></code> del total.</p>
<ul class="simple">
<li><p><strong>Full Time Employees</strong></p></li>
</ul>
<p>Para el análisis de esta variable, vamos a trabajarla como tipo numérico para mejor aprovechamiento.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Full Time Employees&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Full Time Employees&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">astype</span><span class="p">(</span><span class="nb">str</span><span class="p">)</span><span class="o">.</span><span class="n">str</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Full Time Employees&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">to_numeric</span><span class="p">(</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Full Time Employees&#39;</span><span class="p">],</span> <span class="n">errors</span><span class="o">=</span><span class="s1">&#39;coerce&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Full Time Employees&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    4.590000e+02
mean     6.124080e+04
std      1.444049e+05
min      2.800000e+01
25%      1.092600e+04
50%      2.230000e+04
75%      6.000000e+04
max      2.100000e+06
Name: Full Time Employees, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>La descripción indica la posible existencia de datos NA, ya que el número total de observaciones en la columna es de <code class="docutils literal notranslate"><span class="pre">459</span></code>, mientras que la base de datos completa contiene <code class="docutils literal notranslate"><span class="pre">463</span></code> observaciones. Además, se observa una gran diferencia entre los valores extremos pues la cantidad mínima de empleados es de <code class="docutils literal notranslate"><span class="pre">28</span></code>, mientras que la máxima es de <code class="docutils literal notranslate"><span class="pre">2100000</span></code>. Esto sugiere que algunas empresas cuentan con una cantidad de empleados significativamente mayor que las demás, lo que contribuye a la elevada variabilidad de los datos.</p>
<p>En cuanto a las medidas de tendencia central, la media es de <code class="docutils literal notranslate"><span class="pre">61240</span></code> con una desviación estándar considerable de <code class="docutils literal notranslate"><span class="pre">144404</span></code>, lo que refleja la amplia dispersión en los datos. Esta alta variabilidad podemos decir que se debe a la diferencia entre los valores más altos y bajos. Por ello, la mediana de <code class="docutils literal notranslate"><span class="pre">22300</span></code> empleados, es un indicador más representativo del tamaño típico de las empresas, ya que no se ve tan afectada por los valores extremos. Esto indica que la mayoría de las empresas tienen una cantidad de empleados significativamente menor que la media.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Full Time Employees&#39;</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Boxplot de Empleados a Tiempo Completo&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Número de Empleados&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/1eeb8d615b226fd836e66612491f87e53c40407bca178bde207293e7acf5dfea.png" src="_images/1eeb8d615b226fd836e66612491f87e53c40407bca178bde207293e7acf5dfea.png" />
</div>
</div>
<p>Al observar la gráfica, podemos corroborar lo previamente mencionado sobre la distribución de los empleados. Además, es evidente la presencia de una cantidad considerable de datos atípicos, ya que la mayoría de las observaciones están altamente concentradas en los valores más bajos.</p>
<ul class="simple">
<li><p><strong>Description</strong></p></li>
</ul>
<p>Esta variable será eliminada pues no revela información de interés para nuestro estudio.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="s1">&#39;Description&#39;</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p><strong>Total ESG Risk score</strong></p></li>
</ul>
<p>Primeramente, debemos saber que lo ideal es que este puntaje sea lo más bajo posible para considerar que una empresa se encuentra en buen estado relacionado con los índices ESG.</p>
<p>Según Sustainalytics, los rangos de evaluación están dados por:</p>
<ul class="simple">
<li><p><strong>Riesgo insignificante</strong> : 0 - 10</p></li>
<li><p><strong>Riesgo bajo</strong> : 10 - 20</p></li>
<li><p><strong>Riesgo medio</strong> : 20 - 30</p></li>
<li><p><strong>Riesgo alto</strong> : 30 - 40</p></li>
<li><p><strong>Riesgo severo</strong> : 40+</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Total ESG Risk score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    412.000000
mean      21.500728
std        6.862453
min        7.100000
25%       16.375000
50%       21.050000
75%       26.000000
max       41.700000
Name: Total ESG Risk score, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>En este sentido, podemos concluir que, en promedio, las empresas presentan una puntuación de riesgo ESG general en un rango de <code class="docutils literal notranslate"><span class="pre">riesgo</span> <span class="pre">medio</span></code>, con un valor promedio de <code class="docutils literal notranslate"><span class="pre">21.5</span></code> y una desviación estándar de <code class="docutils literal notranslate"><span class="pre">6.8</span></code>, lo que indica una variabilidad moderada. Además, el valor mínimo de <code class="docutils literal notranslate"><span class="pre">7.1</span></code> sugiere que al menos una empresa se encuentra dentro de un rango de riesgo insignificante, mientras que el valor máximo de <code class="docutils literal notranslate"><span class="pre">41.7</span></code> indica que existe al menos una compañía con un riesgo severo. Al analizar los cuartiles, se evidencia que, a gran escala, las empresas están relativamente bien posicionadas, ya que el <code class="docutils literal notranslate"><span class="pre">75%</span> <span class="pre">de</span> <span class="pre">ellas</span> <span class="pre">tiene</span> <span class="pre">una</span> <span class="pre">puntuación</span> <span class="pre">de</span> <span class="pre">26</span> <span class="pre">o</span> <span class="pre">inferior</span></code>. Esto implica que la mayoría de las empresas no sobrepasan el umbral de riesgo medio y se encuentran considerablemente alejadas de los puntajes más elevados, lo que sugiere una gestión efectiva de los riesgos ESG en la mayoría de estas compañías.</p>
<p>Cabe resaltar que nuevamente observamos que la cantidad de observaciones de esta columna es inferior a la total de la base de datos en general, lo que sugiere que esta variable también cuenta con datos faltantes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Total ESG Risk score&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de Puntaje de riesgo ESG&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Puntuación&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/08ca008c567da92b4ab7db4cfd2357c63bcc1130b18e6e28cd6f6eb54d0b07aa.png" src="_images/08ca008c567da92b4ab7db4cfd2357c63bcc1130b18e6e28cd6f6eb54d0b07aa.png" />
</div>
</div>
<p>Podemos observar que, de manera gráfica, se confirma que la mayoría de las puntuaciones de riesgo ESG de las empresas se concentran principalmente entre <code class="docutils literal notranslate"><span class="pre">15</span></code> y <code class="docutils literal notranslate"><span class="pre">25</span></code>, aproximadamente. Esto refuerza la conclusión anterior de que, en general, las compañías se encuentran dentro del rango medio de riesgo.</p>
<p>Para las siguientes 3 variables a evaluar seguiremos trabajando con el rango de valores acabo de enunciar.</p>
<ul class="simple">
<li><p><strong>Environment Risk Score</strong></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Environment Risk Score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    412.000000
mean       5.732282
std        5.075513
min        0.000000
25%        1.800000
50%        4.050000
75%        8.800000
max       25.000000
Name: Environment Risk Score, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>En nuestro conjunto de datos, el promedio del puntaje de riesgo ambiental de las compañías es de <code class="docutils literal notranslate"><span class="pre">5.7</span></code>, con una desviación estándar de <code class="docutils literal notranslate"><span class="pre">5</span></code>. Esto indica que, en general, el riesgo ambiental se encuentra dentro de la categoría de riesgo insignificante. Es importante destacar que hay al menos una compañía con un puntaje de <code class="docutils literal notranslate"><span class="pre">0</span></code>, lo que refleja un manejo ambiental perfecto y la ausencia de impactos negativos. Además, el puntaje máximo registrado en este conjunto de datos es de <code class="docutils literal notranslate"><span class="pre">25</span></code>, lo que sugiere que ninguna empresa supera el riesgo medio según la escala de clasificación establecida. Asimismo, podemos afirmar que la mayoría de las compañías presentan un riesgo ambiental insignificante, ya que el <code class="docutils literal notranslate"><span class="pre">75%</span></code> de los puntajes es menor o igual a <code class="docutils literal notranslate"><span class="pre">8.8</span></code>.</p>
<p>Por otro lado, podemos afirmar que esta variable también cuenta con datos faltantes pues la cantidad de observaciones es menor a la de la base en general.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Environment Risk Score&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de Puntaje de riesgo ambiental&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Puntuación&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9dcc0d31dea4804960bea2b986aba7edb86a65694e4bae4c9df083b4fa5edbb7.png" src="_images/9dcc0d31dea4804960bea2b986aba7edb86a65694e4bae4c9df083b4fa5edbb7.png" />
</div>
</div>
<p>Podemos observar que, de manera gráfica, se confirma que la mayoría de las puntuaciones de riesgo ambiental de las empresas se concentran principalmente entre <code class="docutils literal notranslate"><span class="pre">0</span></code> y <code class="docutils literal notranslate"><span class="pre">5</span></code>, aproximadamente. Esto refuerza la conclusión anterior de que, en general, las compañías se encuentran dentro del rango de riesgo insignificante.</p>
<ul class="simple">
<li><p><strong>Governance Risk Score</strong></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Governance Risk Score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    412.000000
mean       6.726214
std        2.213483
min        3.000000
25%        5.300000
50%        6.100000
75%        7.600000
max       19.400000
Name: Governance Risk Score, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>Para el componente de gobernanza de las empresas, hemos encontrado que el puntaje promedio es de <code class="docutils literal notranslate"><span class="pre">6.72</span></code>, con una desviación estándar de <code class="docutils literal notranslate"><span class="pre">2.21</span></code>. Esto indica que, en general, las compañías se encuentran dentro del rango de riesgo insignificante. Esto se ve respaldado por los valores del segundo y tercer cuartil, que son de <code class="docutils literal notranslate"><span class="pre">6.1</span></code> y <code class="docutils literal notranslate"><span class="pre">7.6</span></code>, respectivamente. Esto sugiere que la mayoría de los puntajes de gobernanza se agrupan en torno a niveles que indican un riesgo insignificante. Sin embargo, es importante señalar que no todas las empresas presentan pertencen a este rango, ya que el puntaje máximo registrado es de <code class="docutils literal notranslate"><span class="pre">19.4</span></code>, lo que implica que al menos una compañía tiene un puntaje que la clasifica en el rango de riesgo medio.</p>
<p>Esta variable cuenta con datos faltantes tal como las variables anteriores.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Governance Risk Score&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de Puntaje de riesgo de governanza&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Puntuación&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/9487ffbb46c02744f0683ca83bcaf341aabcf9c69f353e54b6662b14b4ad21e5.png" src="_images/9487ffbb46c02744f0683ca83bcaf341aabcf9c69f353e54b6662b14b4ad21e5.png" />
</div>
</div>
<p>Podemos observar que, de manera gráfica, se confirma que la mayoría de las puntuaciones de riesgo de governazna de las empresas se concentran principalmente entre <code class="docutils literal notranslate"><span class="pre">5</span></code> y <code class="docutils literal notranslate"><span class="pre">7</span></code>, aproximadamente, con un pico notorio en valor cercano a <code class="docutils literal notranslate"><span class="pre">5</span></code>. Esto refuerza la conclusión anterior de que, en general, las compañías se encuentran dentro del rango de riesgo insignificante.</p>
<ul class="simple">
<li><p><strong>Social Risk Score</strong></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Social Risk Score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    412.000000
mean       9.043204
std        3.682764
min        0.800000
25%        6.675000
50%        8.900000
75%       11.200000
max       22.500000
Name: Social Risk Score, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>En promedio, el puntaje de riesgo social de las compañías incluidas en este estudio es de <code class="docutils literal notranslate"><span class="pre">9</span></code>, con una desviación estándar de <code class="docutils literal notranslate"><span class="pre">3.6</span></code>. Esto sugiere una variabilidad moderada en los puntajes de riesgo social entre las empresas analizadas. El puntaje mínimo registrado es de <code class="docutils literal notranslate"><span class="pre">0.8</span></code>, mientras que el puntaje máximo alcanza <code class="docutils literal notranslate"><span class="pre">22.5</span></code>. Esto indica que algunas empresas se encuentran en la categoría de riesgo insignificante, mientras que otras presentan un riesgo más significativo, clasificándose en el rango de riesgo medio. Además, observamos que el <code class="docutils literal notranslate"><span class="pre">75%</span></code> de las empresas tiene un puntaje igual o inferior a <code class="docutils literal notranslate"><span class="pre">11.2</span></code>. Esto implica que también hay al menos una compañía que se sitúa en un nivel de riesgo bajo.</p>
<p>Nuevamente encontramos una variable que contiene <code class="docutils literal notranslate"><span class="pre">412</span></code> observaciones, es decir, presenta datos faltantes.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Social Risk Score&#39;</span><span class="p">],</span> <span class="n">bins</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">edgecolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Distribución de Puntaje de riesgo social&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Puntuación&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Frecuencia&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">grid</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c3944edc574a9877aee20d1131debcafa940a51a5a5753469963445fcc92baa5.png" src="_images/c3944edc574a9877aee20d1131debcafa940a51a5a5753469963445fcc92baa5.png" />
</div>
</div>
<p>Podemos observar que, de manera gráfica, se confirma que la mayoría de las puntuaciones de riesgo social de las empresas se concentran principalmente entre <code class="docutils literal notranslate"><span class="pre">6</span></code> y <code class="docutils literal notranslate"><span class="pre">11</span></code>, aproximadamente, con un pico notorio en valor cercano a <code class="docutils literal notranslate"><span class="pre">10</span></code>.</p>
<ul class="simple">
<li><p><strong>Puntaje total ESG, Puntaje Ambiental, Puntaje Social y Puntaje Gobernanza</strong></p></li>
</ul>
<p>Ahora, procederemos a analizar el puntaje de riesgo total con cada una de las componentes para observar cómo se relacionan entre sí.</p>
<p>Para esto, vamos a evaluar la correlación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">15</span><span class="p">,</span> <span class="mi">5</span><span class="p">))</span>

<span class="c1"># Gráfico 1: Correlación entre Riesgo Total y Riesgo Ambiental</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">esg</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Total ESG Risk score&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Environment Risk Score&#39;</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Correlación: Riesgo Total vs Riesgo Ambiental&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Puntaje de Riesgo Total&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Puntaje de Riesgo Ambiental&#39;</span><span class="p">)</span>

<span class="c1"># Gráfico 2: Correlación entre Riesgo Total y Riesgo Social</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">esg</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Total ESG Risk score&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Social Risk Score&#39;</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Correlación: Riesgo Total vs Riesgo Social&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Puntaje de Riesgo Total&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Puntaje de Riesgo Social&#39;</span><span class="p">)</span>

<span class="c1"># Gráfico 3: Correlación entre Riesgo Total y Riesgo de Gobernanza</span>
<span class="n">plt</span><span class="o">.</span><span class="n">subplot</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
<span class="n">sns</span><span class="o">.</span><span class="n">scatterplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">esg</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Total ESG Risk score&#39;</span><span class="p">],</span> <span class="n">y</span><span class="o">=</span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Governance Risk Score&#39;</span><span class="p">],</span> <span class="n">color</span> <span class="o">=</span> <span class="s1">&#39;skyblue&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Correlación: Riesgo Total vs Riesgo de Gobernanza&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">xlabel</span><span class="p">(</span><span class="s1">&#39;Puntaje de Riesgo Total&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">ylabel</span><span class="p">(</span><span class="s1">&#39;Puntaje de Riesgo de Gobernanza&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/80246741eb286e0e4526aa5f9be8ae33054a18958dbf8dbd80eece1065e2b93a.png" src="_images/80246741eb286e0e4526aa5f9be8ae33054a18958dbf8dbd80eece1065e2b93a.png" />
</div>
</div>
<p>Es evidente que existe una relación entre el puntaje total y cada una de las tres componentes. En general, las tres gráficas revelan un comportamiento de correlación positiva directa, lo que implica que a medida que el puntaje de una componente aumenta, también lo hace el puntaje total.</p>
<p>Sin embargo, las relaciones más notables y fuertes se observan entre el puntaje total con el riesgo ambiental y social. Esto sugiere que las empresas con mayor riesgo ambiental y social tienden a tener un puntaje total más elevado, lo que podría indicar que estas cuestiones son un factor determinante en el desempeño general de las compañías en términos de riesgo.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">puntajes</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[[</span><span class="s1">&#39;Total ESG Risk score&#39;</span><span class="p">,</span> <span class="s1">&#39;Environment Risk Score&#39;</span><span class="p">,</span> <span class="s1">&#39;Social Risk Score&#39;</span><span class="p">,</span> <span class="s1">&#39;Governance Risk Score&#39;</span><span class="p">]]</span>
<span class="n">puntajes</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Total ESG Risk score</th>
      <th>Environment Risk Score</th>
      <th>Social Risk Score</th>
      <th>Governance Risk Score</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Total ESG Risk score</th>
      <td>1.000000</td>
      <td>0.693944</td>
      <td>0.691391</td>
      <td>0.358996</td>
    </tr>
    <tr>
      <th>Environment Risk Score</th>
      <td>0.693944</td>
      <td>1.000000</td>
      <td>0.047489</td>
      <td>-0.220377</td>
    </tr>
    <tr>
      <th>Social Risk Score</th>
      <td>0.691391</td>
      <td>0.047489</td>
      <td>1.000000</td>
      <td>0.371540</td>
    </tr>
    <tr>
      <th>Governance Risk Score</th>
      <td>0.358996</td>
      <td>-0.220377</td>
      <td>0.371540</td>
      <td>1.000000</td>
    </tr>
  </tbody>
</table>
</div></div></div>
</div>
<p>Al calcular los coeficientes de correlación, confirmamos que las relaciones más fuertes del puntaje total se encuentran con el puntaje de riesgo ambiental y el puntaje de riesgo social (<code class="docutils literal notranslate"><span class="pre">0.693</span></code> y <code class="docutils literal notranslate"><span class="pre">0.691</span></code>, respectivamente). Mientras tanto, la relación con el puntaje de riesgo de gobernanza es considerada baja (<code class="docutils literal notranslate"><span class="pre">0.358</span></code>).</p>
<ul class="simple">
<li><p><strong>Total ESG Risk score y Sector</strong></p></li>
</ul>
<p>Analicemos cuál o cuáles sectores presentan mayor riesgo ESG.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">totalsectprom</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">groupby</span><span class="p">(</span><span class="s1">&#39;Sector&#39;</span><span class="p">)[</span><span class="s1">&#39;Total ESG Risk score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>
<span class="n">totalsectprom</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sector&#39;</span><span class="p">,</span> <span class="s1">&#39;Puntaje Total de riesgo ESG Promedio&#39;</span><span class="p">]</span>
<span class="n">totalsectprom</span> <span class="o">=</span> <span class="n">totalsectprom</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="n">by</span><span class="o">=</span><span class="s1">&#39;Puntaje Total de riesgo ESG Promedio&#39;</span><span class="p">,</span> <span class="n">ascending</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">tabla2</span> <span class="o">=</span> <span class="n">totalsectprom</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;width: 80%; margin: auto;&quot;&#39;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot; Puntaje total promedio por sector&quot;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">set_table_styles</span><span class="p">([{</span>
         <span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;th&#39;</span><span class="p">,</span>
         <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;background-color&#39;</span><span class="p">,</span> <span class="s1">&#39;lightgray&#39;</span><span class="p">)]</span>
         <span class="p">},</span> <span class="p">{</span>
         <span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;td&#39;</span><span class="p">,</span>
         <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;padding&#39;</span><span class="p">,</span> <span class="s1">&#39;10px&#39;</span><span class="p">)]</span>
         <span class="p">}])</span>
<span class="n">display</span><span class="p">(</span><span class="n">tabla2</span><span class="p">)</span>
    
    
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_65d1d th {
  background-color: lightgray;
}
#T_65d1d td {
  padding: 10px;
}
#T_65d1d_row0_col1 {
  background-color: #08306b;
  color: #f1f1f1;
}
#T_65d1d_row1_col1 {
  background-color: #2b7bba;
  color: #f1f1f1;
}
#T_65d1d_row2_col1 {
  background-color: #2d7dbb;
  color: #f1f1f1;
}
#T_65d1d_row3_col1 {
  background-color: #3d8dc4;
  color: #f1f1f1;
}
#T_65d1d_row4_col1 {
  background-color: #4f9bcb;
  color: #f1f1f1;
}
#T_65d1d_row5_col1 {
  background-color: #85bcdc;
  color: #000000;
}
#T_65d1d_row6_col1 {
  background-color: #8abfdd;
  color: #000000;
}
#T_65d1d_row7_col1 {
  background-color: #a8cee4;
  color: #000000;
}
#T_65d1d_row8_col1 {
  background-color: #aacfe5;
  color: #000000;
}
#T_65d1d_row9_col1 {
  background-color: #cee0f2;
  color: #000000;
}
#T_65d1d_row10_col1 {
  background-color: #f7fbff;
  color: #000000;
}
</style>
<table id="T_65d1d" style="width: 80%; margin: auto;">
  <caption> Puntaje total promedio por sector</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_65d1d_level0_col0" class="col_heading level0 col0" >Sector</th>
      <th id="T_65d1d_level0_col1" class="col_heading level0 col1" >Puntaje Total de riesgo ESG Promedio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_65d1d_level0_row0" class="row_heading level0 row0" >4</th>
      <td id="T_65d1d_row0_col0" class="data row0 col0" >Energy</td>
      <td id="T_65d1d_row0_col1" class="data row0 col1" >32.100000</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row1" class="row_heading level0 row1" >10</th>
      <td id="T_65d1d_row1_col0" class="data row1 col0" >Utilities</td>
      <td id="T_65d1d_row1_col1" class="data row1 col1" >26.574074</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row2" class="row_heading level0 row2" >0</th>
      <td id="T_65d1d_row2_col0" class="data row2 col0" >Basic Materials</td>
      <td id="T_65d1d_row2_col1" class="data row2 col1" >26.366667</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_65d1d_row3_col0" class="data row3 col0" >Consumer Defensive</td>
      <td id="T_65d1d_row3_col1" class="data row3 col1" >25.212500</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row4" class="row_heading level0 row4" >7</th>
      <td id="T_65d1d_row4_col0" class="data row4 col0" >Industrials</td>
      <td id="T_65d1d_row4_col1" class="data row4 col1" >24.088136</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_65d1d_row5_col0" class="data row5 col0" >Financial Services</td>
      <td id="T_65d1d_row5_col1" class="data row5 col1" >21.185000</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row6" class="row_heading level0 row6" >6</th>
      <td id="T_65d1d_row6_col0" class="data row6 col0" >Healthcare</td>
      <td id="T_65d1d_row6_col1" class="data row6 col1" >20.994000</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row7" class="row_heading level0 row7" >1</th>
      <td id="T_65d1d_row7_col0" class="data row7 col0" >Communication Services</td>
      <td id="T_65d1d_row7_col1" class="data row7 col1" >19.414286</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row8" class="row_heading level0 row8" >2</th>
      <td id="T_65d1d_row8_col0" class="data row8 col0" >Consumer Cyclical</td>
      <td id="T_65d1d_row8_col1" class="data row8 col1" >19.274000</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row9" class="row_heading level0 row9" >9</th>
      <td id="T_65d1d_row9_col0" class="data row9 col0" >Technology</td>
      <td id="T_65d1d_row9_col1" class="data row9 col1" >16.835088</td>
    </tr>
    <tr>
      <th id="T_65d1d_level0_row10" class="row_heading level0 row10" >8</th>
      <td id="T_65d1d_row10_col0" class="data row10 col0" >Real Estate</td>
      <td id="T_65d1d_row10_col1" class="data row10 col1" >12.759259</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Por lo tanto, se puede afirmar que el sector con el mayor promedio de puntaje total de riesgo ESG es el sector <strong>Energy</strong> (Energía), con un valor de <code class="docutils literal notranslate"><span class="pre">32.1</span></code>. Esto indica que las empresas pertenecientes a este sector presentan, en promedio, un mayor nivel de riesgo ESG en comparación con otros sectores, lo que podría sugerir áreas de mejora en su gestión de factores ambientales, sociales y de gobernanza.</p>
<ul class="simple">
<li><p><strong>Controversy Level</strong></p></li>
</ul>
<p>Para esta variable es importante mencionar que entre más alto sea el nivel, peor es el comportamiento o desempeño respecto a los riesgos ESG.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nivelcontroversia</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Controversy Level&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">nivelcontroversia</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Frecuencia de Cada Nivel de Controversia&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Nivel de Controversia&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Cantidad de Empresas&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">nivelcontroversia</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nivelcontroversia</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/c87cbe6e4cae7b45cde5e25b78cc87998445827543058b6b782cd5945fd3c8af.png" src="_images/c87cbe6e4cae7b45cde5e25b78cc87998445827543058b6b782cd5945fd3c8af.png" />
</div>
</div>
<p>A partir de esto, podemos concluir que la mayoría de las empresas gestiona de manera relativamente adecuada los riesgos relacionados con ESG, ya que el nivel de controversia más frecuente resultó ser <strong>Moderate Controversy Level</strong> (nivel moderado) con <code class="docutils literal notranslate"><span class="pre">191</span></code> compañías. Sin embargo, es importante destacar que 12 empresas necesitan realizar cambios o gestiones urgentes, ya que presentan niveles de controversia alto (<code class="docutils literal notranslate"><span class="pre">10</span></code> empresas) y severo (<code class="docutils literal notranslate"><span class="pre">2</span></code> empresas). Esto indica que están enfrentando problemas significativos en estos componentes y corren un mayor riesgo ESG.</p>
<ul class="simple">
<li><p><strong>Controversy Score</strong></p></li>
</ul>
<p>Lo ideal para las compañías es que este valor sea lo menor posible, ya que un puntaje más alto implica que las controversias fueron más graves o tuvieron un impacto de mayor alcance, lo cual no es deseable.</p>
<p>Primeramente, veamos cuántos puntajes únicos hay en total.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Controversy Score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">unique</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>array([nan,  2.,  1.,  5.,  3.,  4.])
</pre></div>
</div>
</div>
</div>
<p>Teniendo en cuenta esto, vamos a considerar trabajar esta variable como tipo factor pues solo hay cinco opciones diferentes y lo que hacen es clasificar la gravedad de la controversia.</p>
<p>Vamos a crear nuestro sistema de clasificación de la siguiente manera.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">clasificacion</span> <span class="o">=</span> <span class="p">{</span>
    <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;Bajo&#39;</span><span class="p">,</span>
    <span class="mi">2</span><span class="p">:</span> <span class="s1">&#39;Moderado&#39;</span><span class="p">,</span>
    <span class="mi">3</span><span class="p">:</span> <span class="s1">&#39;Significativo&#39;</span><span class="p">,</span>
    <span class="mi">4</span><span class="p">:</span> <span class="s1">&#39;Alto&#39;</span><span class="p">,</span>
    <span class="mi">5</span><span class="p">:</span> <span class="s1">&#39;Severo&#39;</span>
<span class="p">}</span>

<span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Controversy Score&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Controversy Score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="n">clasificacion</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">nivelgravedad</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;Controversy Score&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">nivelgravedad</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Frecuencia de Cada Nivel de Gravedad&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Nivel de Gravedad de Controversia&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Cantidad de Empresas&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">nivelgravedad</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">nivelgravedad</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/dbaf49afe4be78c06ff65e121840d29d4aaeab0101fde3344431fd8b4c944624.png" src="_images/dbaf49afe4be78c06ff65e121840d29d4aaeab0101fde3344431fd8b4c944624.png" />
</div>
</div>
<p>Vemos que los resultados en esta variable coinciden con los obtenidos anteriormente, esto implica relación directa entre ambas variables.</p>
<ul class="simple">
<li><p><strong>ESG Risk Percentile</strong></p></li>
</ul>
<p>Lo primero que hacemos con esta variable es pasar los valores a tipo numérico dado el respectivo percentil. Esto se hace con el fin de poder hacer un análisis más provechoso de esta variable.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">re</span>

<span class="k">def</span> <span class="nf">convertir_percentil_a_numero</span><span class="p">(</span><span class="n">valor</span><span class="p">):</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">valor</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">match</span> <span class="o">=</span> <span class="n">re</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;(\d+)(th|rd|nd|st) percentile&#39;</span><span class="p">,</span> <span class="n">valor</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
        
            <span class="k">return</span> <span class="nb">float</span><span class="p">(</span><span class="n">match</span><span class="o">.</span><span class="n">group</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span> <span class="o">/</span> <span class="mi">100</span>
    <span class="k">return</span> <span class="n">valor</span>

<span class="n">esg</span><span class="p">[</span><span class="s1">&#39;ESG Risk Percentile&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;ESG Risk Percentile&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">convertir_percentil_a_numero</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="p">[</span><span class="s1">&#39;ESG Risk Percentile&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>count    412.000000
mean       0.355898
std        0.241141
min        0.010000
25%        0.150000
50%        0.320000
75%        0.530000
max        0.930000
Name: ESG Risk Percentile, dtype: float64
</pre></div>
</div>
</div>
</div>
<p>En esta variable, podemos observar que el percentil promedio en el que se encuentran las empresas es del 35%, con una desviación estándar del 24%. Esto es positivo, ya que sugiere que, en general, las empresas enfrentan un riesgo ESG moderado. Se destaca que al menos una empresa se encuentra en el percentil 1, lo que indica que está muy bien preparada y gestionada en términos de ESG, mientras que otra se sitúa en el percentil 93, lo que sugiere que tiene un riesgo considerable y necesita mejorar sus prácticas relacionadas con estos indicadores.</p>
<p>Además, la mayoría de las empresas muestran un rendimiento moderado, ya que el 75% de ellas se encuentra por debajo del percentil 53. Es importante destacar que el número de observaciones en esta columna es inferior al total de la base de datos, lo que sugiere la presencia de datos faltantes en esta variable.</p>
<ul class="simple">
<li><p><strong>ESG Risk Level</strong></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">sectorep</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[</span><span class="s1">&#39;ESG Risk Level&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">value_counts</span><span class="p">()</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>
<span class="n">sectorep</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">kind</span><span class="o">=</span><span class="s1">&#39;bar&#39;</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">ax</span><span class="o">=</span><span class="n">ax</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="s1">&#39;Frecuencia de Cada Nivel de Riesgo&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;Nivel de Riesgo&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;Cantidad de Empresas&#39;</span><span class="p">)</span>
<span class="n">ax</span><span class="o">.</span><span class="n">set_xticklabels</span><span class="p">(</span><span class="n">sectorep</span><span class="o">.</span><span class="n">index</span><span class="p">,</span> <span class="n">rotation</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">ha</span><span class="o">=</span><span class="s1">&#39;right&#39;</span><span class="p">)</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">sectorep</span><span class="p">):</span>
    <span class="n">ax</span><span class="o">.</span><span class="n">text</span><span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">v</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">v</span><span class="p">),</span> <span class="n">horizontalalignment</span><span class="o">=</span><span class="s1">&#39;center&#39;</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">tight_layout</span><span class="p">()</span>  
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/675a3be278eede090fa9f0e30e0ec49eb1d3765198ff03ac6ac6ef1dbbacacec.png" src="_images/675a3be278eede090fa9f0e30e0ec49eb1d3765198ff03ac6ac6ef1dbbacacec.png" />
</div>
</div>
<p>Podemos observar que, al igual que en las variables analizadas anteriormente, la mayoría de las compañías se concentran en los niveles de riesgo <strong>Medium</strong> (medio o moderado) y <strong>Low</strong> (bajo), con <code class="docutils literal notranslate"><span class="pre">180</span></code> y <code class="docutils literal notranslate"><span class="pre">178</span></code> empresas respectivamente. Esto sugiere que, en general, las empresas están iniciando o ya han implementado mejoras en sus estrategias relacionadas con la sostenibilidad y la gestión de riesgos ESG. En contraste, los demás niveles de riesgo, como <strong>High</strong> (alto), <strong>Negligible</strong> (insignificante) y <strong>Severe</strong> (severo), presentan frecuencias considerablemente más bajas en comparación con los dos predominantes, lo que refuerza la tendencia hacia una gestión más responsable y consciente de los riesgos ambientales y sociales.</p>
</section>
<section id="deteccion-de-datos-faltantes-na">
<h2>Detección de datos faltantes (NA)<a class="headerlink" href="#deteccion-de-datos-faltantes-na" title="Link to this heading">#</a></h2>
<p>A continuación, procederemos a analizar la base de datos para determinar la presencia de datos faltantes, es decir, evaluaremos si hay información en nuestro conjunto de datos que no ha sido registrada. Posteriormente, realizaremos la imputación adecuada para abordar cualquier ausencia de datos identificada. Todo esto con el fin de evitar problemas en los modelos que hagamos más adelante y, a su vez, para asegurar que la información sea más representativa, lo que nos permitirá obtener análisis más precisos y tomar decisiones más informadas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">from</span> <span class="nn">IPython.display</span> <span class="kn">import</span> <span class="n">display</span>

<span class="n">na</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span><span class="o">.</span><span class="n">reset_index</span><span class="p">()</span>  <span class="c1"># Contar datos faltantes</span>
<span class="n">na</span><span class="o">.</span><span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Columna&#39;</span><span class="p">,</span> <span class="s1">&#39;Cantidad de Datos Faltantes&#39;</span><span class="p">]</span>  

<span class="n">na</span><span class="p">[</span><span class="s1">&#39;Porcentaje de Datos Faltantes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">na</span><span class="p">[</span><span class="s1">&#39;Cantidad de Datos Faltantes&#39;</span><span class="p">]</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">esg</span><span class="p">))</span> <span class="o">*</span> <span class="mi">100</span> <span class="c1"># Calcular el porcentaje de datos faltantes</span>

<span class="n">na</span><span class="p">[</span><span class="s1">&#39;Porcentaje de Datos Faltantes&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">na</span><span class="p">[</span><span class="s1">&#39;Porcentaje de Datos Faltantes&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">{:.2f}</span><span class="s1">%&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">)</span>

<span class="n">tabla3</span> <span class="o">=</span> <span class="n">na</span><span class="o">.</span><span class="n">style</span><span class="o">.</span><span class="n">set_table_attributes</span><span class="p">(</span><span class="s1">&#39;style=&quot;width: 80%; margin: auto;&quot;&#39;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">set_caption</span><span class="p">(</span><span class="s2">&quot;Datos Faltantes por Columna&quot;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">background_gradient</span><span class="p">(</span><span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">)</span> \
    <span class="o">.</span><span class="n">set_table_styles</span><span class="p">([{</span>
         <span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;th&#39;</span><span class="p">,</span>
         <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;background-color&#39;</span><span class="p">,</span> <span class="s1">&#39;lightgray&#39;</span><span class="p">)]</span>
         <span class="p">},</span> <span class="p">{</span>
         <span class="s1">&#39;selector&#39;</span><span class="p">:</span> <span class="s1">&#39;td&#39;</span><span class="p">,</span>
         <span class="s1">&#39;props&#39;</span><span class="p">:</span> <span class="p">[(</span><span class="s1">&#39;padding&#39;</span><span class="p">,</span> <span class="s1">&#39;10px&#39;</span><span class="p">)]</span>
         <span class="p">}])</span>


<span class="n">display</span><span class="p">(</span><span class="n">tabla3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style type="text/css">
#T_741ed th {
  background-color: lightgray;
}
#T_741ed td {
  padding: 10px;
}
#T_741ed_row0_col1, #T_741ed_row1_col1, #T_741ed_row2_col1, #T_741ed_row3_col1 {
  background-color: #f7fbff;
  color: #000000;
}
#T_741ed_row4_col1 {
  background-color: #edf4fc;
  color: #000000;
}
#T_741ed_row5_col1, #T_741ed_row6_col1, #T_741ed_row7_col1, #T_741ed_row8_col1, #T_741ed_row9_col1, #T_741ed_row11_col1, #T_741ed_row12_col1 {
  background-color: #3888c1;
  color: #f1f1f1;
}
#T_741ed_row10_col1 {
  background-color: #08306b;
  color: #f1f1f1;
}
</style>
<table id="T_741ed" style="width: 80%; margin: auto;">
  <caption>Datos Faltantes por Columna</caption>
  <thead>
    <tr>
      <th class="blank level0" >&nbsp;</th>
      <th id="T_741ed_level0_col0" class="col_heading level0 col0" >Columna</th>
      <th id="T_741ed_level0_col1" class="col_heading level0 col1" >Cantidad de Datos Faltantes</th>
      <th id="T_741ed_level0_col2" class="col_heading level0 col2" >Porcentaje de Datos Faltantes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th id="T_741ed_level0_row0" class="row_heading level0 row0" >0</th>
      <td id="T_741ed_row0_col0" class="data row0 col0" >Symbol</td>
      <td id="T_741ed_row0_col1" class="data row0 col1" >0</td>
      <td id="T_741ed_row0_col2" class="data row0 col2" >0.00%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row1" class="row_heading level0 row1" >1</th>
      <td id="T_741ed_row1_col0" class="data row1 col0" >Name</td>
      <td id="T_741ed_row1_col1" class="data row1 col1" >0</td>
      <td id="T_741ed_row1_col2" class="data row1 col2" >0.00%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row2" class="row_heading level0 row2" >2</th>
      <td id="T_741ed_row2_col0" class="data row2 col0" >Sector</td>
      <td id="T_741ed_row2_col1" class="data row2 col1" >0</td>
      <td id="T_741ed_row2_col2" class="data row2 col2" >0.00%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row3" class="row_heading level0 row3" >3</th>
      <td id="T_741ed_row3_col0" class="data row3 col0" >Industry</td>
      <td id="T_741ed_row3_col1" class="data row3 col1" >0</td>
      <td id="T_741ed_row3_col2" class="data row3 col2" >0.00%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row4" class="row_heading level0 row4" >4</th>
      <td id="T_741ed_row4_col0" class="data row4 col0" >Full Time Employees</td>
      <td id="T_741ed_row4_col1" class="data row4 col1" >4</td>
      <td id="T_741ed_row4_col2" class="data row4 col2" >0.86%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row5" class="row_heading level0 row5" >5</th>
      <td id="T_741ed_row5_col0" class="data row5 col0" >Total ESG Risk score</td>
      <td id="T_741ed_row5_col1" class="data row5 col1" >51</td>
      <td id="T_741ed_row5_col2" class="data row5 col2" >11.02%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row6" class="row_heading level0 row6" >6</th>
      <td id="T_741ed_row6_col0" class="data row6 col0" >Environment Risk Score</td>
      <td id="T_741ed_row6_col1" class="data row6 col1" >51</td>
      <td id="T_741ed_row6_col2" class="data row6 col2" >11.02%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row7" class="row_heading level0 row7" >7</th>
      <td id="T_741ed_row7_col0" class="data row7 col0" >Governance Risk Score</td>
      <td id="T_741ed_row7_col1" class="data row7 col1" >51</td>
      <td id="T_741ed_row7_col2" class="data row7 col2" >11.02%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row8" class="row_heading level0 row8" >8</th>
      <td id="T_741ed_row8_col0" class="data row8 col0" >Social Risk Score</td>
      <td id="T_741ed_row8_col1" class="data row8 col1" >51</td>
      <td id="T_741ed_row8_col2" class="data row8 col2" >11.02%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row9" class="row_heading level0 row9" >9</th>
      <td id="T_741ed_row9_col0" class="data row9 col0" >Controversy Level</td>
      <td id="T_741ed_row9_col1" class="data row9 col1" >51</td>
      <td id="T_741ed_row9_col2" class="data row9 col2" >11.02%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row10" class="row_heading level0 row10" >10</th>
      <td id="T_741ed_row10_col0" class="data row10 col0" >Controversy Score</td>
      <td id="T_741ed_row10_col1" class="data row10 col1" >77</td>
      <td id="T_741ed_row10_col2" class="data row10 col2" >16.63%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row11" class="row_heading level0 row11" >11</th>
      <td id="T_741ed_row11_col0" class="data row11 col0" >ESG Risk Percentile</td>
      <td id="T_741ed_row11_col1" class="data row11 col1" >51</td>
      <td id="T_741ed_row11_col2" class="data row11 col2" >11.02%</td>
    </tr>
    <tr>
      <th id="T_741ed_level0_row12" class="row_heading level0 row12" >12</th>
      <td id="T_741ed_row12_col0" class="data row12 col0" >ESG Risk Level</td>
      <td id="T_741ed_row12_col1" class="data row12 col1" >51</td>
      <td id="T_741ed_row12_col2" class="data row12 col2" >11.02%</td>
    </tr>
  </tbody>
</table>
</div></div>
</div>
<p>Veamos esto gráficamente.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">3</span><span class="p">))</span>
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">esg</span><span class="o">.</span><span class="n">isnull</span><span class="p">(),</span> <span class="n">cbar</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">yticklabels</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Datos Faltantes&#39;</span><span class="p">)</span>

<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/003e4747a747fe680d056ddc3bdbee6d909c40dec4e13a1cfed47935a3e60ce7.png" src="_images/003e4747a747fe680d056ddc3bdbee6d909c40dec4e13a1cfed47935a3e60ce7.png" />
</div>
</div>
<p>Tanto en la tabla como en la gráfica, podemos observar claramente la presencia de datos faltantes en varias variables del conjunto. No obstante, es importante resaltar que ninguna de estas variables presenta una cantidad significativa de datos ausentes, lo que nos permite concluir que no será necesario descartar ninguna de ellas por este motivo en esta etapa del análisis.</p>
<p>Sigamos entonces con la imputación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">SimpleImputer</span>
<span class="kn">from</span> <span class="nn">sklearn.experimental</span> <span class="kn">import</span> <span class="n">enable_iterative_imputer</span>
<span class="kn">from</span> <span class="nn">sklearn.impute</span> <span class="kn">import</span> <span class="n">IterativeImputer</span>

<span class="c1"># Imputación para variables numéricas</span>
<span class="n">imputer</span> <span class="o">=</span> <span class="n">IterativeImputer</span><span class="p">(</span><span class="n">max_iter</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">df_num</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;float64&#39;</span><span class="p">,</span> <span class="s1">&#39;int64&#39;</span><span class="p">])</span>
<span class="n">df_imputed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">imputer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_num</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">df_num</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">esg</span><span class="p">[</span><span class="n">df_num</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_imputed</span>

<span class="c1"># Imputación para variables categóricas (usando la moda)</span>
<span class="n">categorical_imputer</span> <span class="o">=</span> <span class="n">SimpleImputer</span><span class="p">(</span><span class="n">strategy</span><span class="o">=</span><span class="s1">&#39;most_frequent&#39;</span><span class="p">)</span>
<span class="n">df_cat</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;object&#39;</span><span class="p">])</span>
<span class="n">df_cat_imputed</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">categorical_imputer</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">df_cat</span><span class="p">),</span> <span class="n">columns</span><span class="o">=</span><span class="n">df_cat</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span>
<span class="n">esg</span><span class="p">[</span><span class="n">df_cat</span><span class="o">.</span><span class="n">columns</span><span class="p">]</span> <span class="o">=</span> <span class="n">df_cat_imputed</span>

<span class="c1"># Verificar si hay valores faltantes</span>
<span class="nb">print</span><span class="p">(</span><span class="n">esg</span><span class="o">.</span><span class="n">isnull</span><span class="p">()</span><span class="o">.</span><span class="n">sum</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Symbol                    0
Name                      0
Sector                    0
Industry                  0
Full Time Employees       0
Total ESG Risk score      0
Environment Risk Score    0
Governance Risk Score     0
Social Risk Score         0
Controversy Level         0
Controversy Score         0
ESG Risk Percentile       0
ESG Risk Level            0
dtype: int64
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Name</th>
      <th>Sector</th>
      <th>Industry</th>
      <th>Full Time Employees</th>
      <th>Total ESG Risk score</th>
      <th>Environment Risk Score</th>
      <th>Governance Risk Score</th>
      <th>Social Risk Score</th>
      <th>Controversy Level</th>
      <th>Controversy Score</th>
      <th>ESG Risk Percentile</th>
      <th>ESG Risk Level</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ENPH</td>
      <td>Enphase Energy, Inc.</td>
      <td>Technology</td>
      <td>Solar</td>
      <td>3157.0</td>
      <td>21.502051</td>
      <td>5.732427</td>
      <td>6.72621</td>
      <td>9.042999</td>
      <td>Moderate Controversy Level</td>
      <td>Moderado</td>
      <td>0.355324</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>1</th>
      <td>EMN</td>
      <td>Eastman Chemical Company</td>
      <td>Basic Materials</td>
      <td>Specialty Chemicals</td>
      <td>14000.0</td>
      <td>25.300000</td>
      <td>12.800000</td>
      <td>6.60000</td>
      <td>5.800000</td>
      <td>Moderate Controversy Level</td>
      <td>Moderado</td>
      <td>0.500000</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>2</th>
      <td>DPZ</td>
      <td>Domino's Pizza Inc.</td>
      <td>Consumer Cyclical</td>
      <td>Restaurants</td>
      <td>6500.0</td>
      <td>29.200000</td>
      <td>10.600000</td>
      <td>6.30000</td>
      <td>12.200000</td>
      <td>Moderate Controversy Level</td>
      <td>Moderado</td>
      <td>0.660000</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>3</th>
      <td>DVA</td>
      <td>Davita Inc.</td>
      <td>Healthcare</td>
      <td>Medical Care Facilities</td>
      <td>70000.0</td>
      <td>22.600000</td>
      <td>0.100000</td>
      <td>8.40000</td>
      <td>14.100000</td>
      <td>Moderate Controversy Level</td>
      <td>Moderado</td>
      <td>0.380000</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>4</th>
      <td>DRI</td>
      <td>Darden Restaurants, Inc.</td>
      <td>Consumer Cyclical</td>
      <td>Restaurants</td>
      <td>187384.0</td>
      <td>27.500000</td>
      <td>7.900000</td>
      <td>4.60000</td>
      <td>15.000000</td>
      <td>Moderate Controversy Level</td>
      <td>Moderado</td>
      <td>0.590000</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>...</th>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
      <td>...</td>
    </tr>
    <tr>
      <th>458</th>
      <td>ACN</td>
      <td>Accenture Plc</td>
      <td>Technology</td>
      <td>Information Technology Services</td>
      <td>742000.0</td>
      <td>9.800000</td>
      <td>0.800000</td>
      <td>4.40000</td>
      <td>4.600000</td>
      <td>Moderate Controversy Level</td>
      <td>Moderado</td>
      <td>0.030000</td>
      <td>Negligible</td>
    </tr>
    <tr>
      <th>459</th>
      <td>ABBV</td>
      <td>Abbvie Inc.</td>
      <td>Healthcare</td>
      <td>Drug Manufacturers - General</td>
      <td>50000.0</td>
      <td>29.900000</td>
      <td>2.400000</td>
      <td>10.40000</td>
      <td>17.200000</td>
      <td>Significant Controversy Level</td>
      <td>Significativo</td>
      <td>0.690000</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>460</th>
      <td>ABT</td>
      <td>Abbott Laboratories</td>
      <td>Healthcare</td>
      <td>Medical Devices</td>
      <td>114000.0</td>
      <td>24.800000</td>
      <td>2.300000</td>
      <td>8.30000</td>
      <td>14.200000</td>
      <td>Significant Controversy Level</td>
      <td>Significativo</td>
      <td>0.480000</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>461</th>
      <td>AOS</td>
      <td>A.O. Smith Corporation</td>
      <td>Industrials</td>
      <td>Specialty Industrial Machinery</td>
      <td>12000.0</td>
      <td>25.400000</td>
      <td>7.200000</td>
      <td>6.40000</td>
      <td>11.900000</td>
      <td>Low Controversy Level</td>
      <td>Bajo</td>
      <td>0.510000</td>
      <td>Medium</td>
    </tr>
    <tr>
      <th>462</th>
      <td>MMM</td>
      <td>3m Company</td>
      <td>Industrials</td>
      <td>Conglomerates</td>
      <td>85000.0</td>
      <td>37.300000</td>
      <td>17.200000</td>
      <td>6.50000</td>
      <td>13.600000</td>
      <td>Severe Controversy Level</td>
      <td>Severo</td>
      <td>0.890000</td>
      <td>High</td>
    </tr>
  </tbody>
</table>
<p>463 rows × 13 columns</p>
</div></div></div>
</div>
</section>
<section id="deteccion-de-valores-atipicos">
<h2>Detección de valores atípicos<a class="headerlink" href="#deteccion-de-valores-atipicos" title="Link to this heading">#</a></h2>
<p>Ahora, utilizaremos gráficos de caja y bigote (boxplots) para identificar la presencia de datos atípicos en nuestras variables. Estos gráficos nos permiten visualizar si existen valores que se alejan significativamente de la mayoría de los datos, facilitando así la detección de posibles anomalías o valores extremos que podrían influir en nuestros análisis futuros.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">numericas</span> <span class="o">=</span> <span class="n">esg</span><span class="p">[[</span><span class="s1">&#39;Full Time Employees&#39;</span><span class="p">,</span> <span class="s1">&#39;Total ESG Risk score&#39;</span><span class="p">,</span> <span class="s1">&#39;Environment Risk Score&#39;</span><span class="p">,</span> <span class="s1">&#39;Social Risk Score&#39;</span><span class="p">,</span> <span class="s1">&#39;Governance Risk Score&#39;</span><span class="p">,</span> <span class="s1">&#39;ESG Risk Percentile&#39;</span><span class="p">]]</span>

<span class="n">sns</span><span class="o">.</span><span class="n">set</span><span class="p">(</span><span class="n">style</span><span class="o">=</span><span class="s2">&quot;whitegrid&quot;</span><span class="p">)</span>

<span class="n">fig</span><span class="p">,</span> <span class="n">axs</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">subplots</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">,</span> <span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">18</span><span class="p">,</span> <span class="mi">6</span><span class="p">))</span>

<span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">variable</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">numericas</span><span class="p">):</span>
    <span class="n">sns</span><span class="o">.</span><span class="n">boxplot</span><span class="p">(</span><span class="n">data</span><span class="o">=</span><span class="n">esg</span><span class="p">[</span><span class="n">variable</span><span class="p">],</span> <span class="n">ax</span><span class="o">=</span><span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">color</span><span class="o">=</span><span class="s1">&#39;skyblue&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span> 
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_title</span><span class="p">(</span><span class="n">variable</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">12</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_xlabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">set_ylabel</span><span class="p">(</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  
    <span class="n">axs</span><span class="p">[</span><span class="n">i</span><span class="p">]</span><span class="o">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">axis</span><span class="o">=</span><span class="s1">&#39;both&#39;</span><span class="p">,</span> <span class="n">which</span><span class="o">=</span><span class="s1">&#39;major&#39;</span><span class="p">,</span> <span class="n">labelsize</span><span class="o">=</span><span class="mi">10</span><span class="p">)</span>  


<span class="n">plt</span><span class="o">.</span><span class="n">subplots_adjust</span><span class="p">(</span><span class="n">wspace</span><span class="o">=</span><span class="mf">0.4</span><span class="p">)</span>


<span class="n">fig</span><span class="o">.</span><span class="n">suptitle</span><span class="p">(</span><span class="s1">&#39;Distribución de Variables con Boxplots&#39;</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">16</span><span class="p">,</span> <span class="n">fontweight</span><span class="o">=</span><span class="s1">&#39;bold&#39;</span><span class="p">)</span>


<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/acaa5b0f91591d68b7906657cde7236da4c538f30611047b676795c1679708c0.png" src="_images/acaa5b0f91591d68b7906657cde7236da4c538f30611047b676795c1679708c0.png" />
</div>
</div>
<p>Es evidente que entre todas las variables, solo la que corresponde al percentil de riesgo no presenta datos atípicos. Sin embargo, dado que esta información refleja la realidad del entorno financiero y empresarial de diversas compañías, hemos decidido no imputar los datos atípicos. Estos valores no necesariamente son producto de errores o anomalías que deban corregirse, sino que pueden ser representaciones válidas de la naturaleza de las empresas, como grandes corporaciones o empresas con altos niveles de riesgo ESG. Por lo tanto, es importante mantener estos valores tal como están para preservar la representatividad y precisión del análisis.</p>
</section>
<section id="analisis-de-multicolinealidad">
<h2>Análisis de multicolinealidad<a class="headerlink" href="#analisis-de-multicolinealidad" title="Link to this heading">#</a></h2>
<p>Observemos el comportamiento de la relación entre variables con la matriz de correlación.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">floatclm</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;float64&#39;</span><span class="p">])</span>
<span class="n">correlation_matrix</span> <span class="o">=</span> <span class="n">floatclm</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span>  
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">correlation_matrix</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Matriz de Correlación&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b034a9cf81acaba2aabacc78ccf181420bc13b288c7fc7e3792a764cad79642e.png" src="_images/b034a9cf81acaba2aabacc78ccf181420bc13b288c7fc7e3792a764cad79642e.png" />
</div>
</div>
<p>Dado que existe una correlación muy alta (0.99) entre <strong>Total ESG Risk Score</strong> y <strong>ESG Risk Percentile</strong>, podemos eliminar <strong>ESG Risk Percentile</strong> para evitar multicolinealidad y mejorar la eficiencia del modelo sin perder información.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esg</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;ESG Risk Percentile&#39;</span><span class="p">],</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">floatclm</span> <span class="o">=</span> <span class="n">esg</span><span class="o">.</span><span class="n">select_dtypes</span><span class="p">(</span><span class="n">include</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;float64&#39;</span><span class="p">])</span>
<span class="n">correlation_matrix</span> <span class="o">=</span> <span class="n">floatclm</span><span class="o">.</span><span class="n">corr</span><span class="p">()</span>
<span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="n">figsize</span><span class="o">=</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">8</span><span class="p">))</span> 
<span class="n">sns</span><span class="o">.</span><span class="n">heatmap</span><span class="p">(</span><span class="n">correlation_matrix</span><span class="p">,</span> <span class="n">annot</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fmt</span><span class="o">=</span><span class="s2">&quot;.2f&quot;</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;Blues&#39;</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Matriz de Correlación&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="_images/b034a9cf81acaba2aabacc78ccf181420bc13b288c7fc7e3792a764cad79642e.png" src="_images/b034a9cf81acaba2aabacc78ccf181420bc13b288c7fc7e3792a764cad79642e.png" />
</div>
</div>
<p>Ahora, lo que haremos será hacer uso de <code class="docutils literal notranslate"><span class="pre">OneHotEncoder</span></code>para transformar las variables categóricas.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esgcat</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;Sector&#39;</span><span class="p">,</span> <span class="s1">&#39;Industry&#39;</span><span class="p">,</span> <span class="s1">&#39;Controversy Level&#39;</span><span class="p">,</span> <span class="s1">&#39;Controversy Score&#39;</span><span class="p">,</span> <span class="s1">&#39;ESG Risk Level&#39;</span><span class="p">]</span>
<span class="n">esgencoder</span> <span class="o">=</span> <span class="n">OneHotEncoder</span><span class="p">(</span><span class="n">sparse_output</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">esgencoded</span> <span class="o">=</span> <span class="n">esgencoder</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">esg</span><span class="p">[</span><span class="n">esgcat</span><span class="p">])</span>
<span class="n">esgencoded</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">esgencoded</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="n">esgencoder</span><span class="o">.</span><span class="n">get_feature_names_out</span><span class="p">(</span><span class="n">esgcat</span><span class="p">))</span>
<span class="n">esgfinal</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">concat</span><span class="p">([</span><span class="n">esg</span><span class="p">,</span> <span class="n">esgencoded</span><span class="p">],</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="n">esgfinal</span><span class="o">.</span><span class="n">drop</span><span class="p">(</span><span class="n">esgcat</span><span class="p">,</span> <span class="n">axis</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">inplace</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">esgfinal</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Symbol</th>
      <th>Name</th>
      <th>Full Time Employees</th>
      <th>Total ESG Risk score</th>
      <th>Environment Risk Score</th>
      <th>Governance Risk Score</th>
      <th>Social Risk Score</th>
      <th>Sector_Basic Materials</th>
      <th>Sector_Communication Services</th>
      <th>Sector_Consumer Cyclical</th>
      <th>...</th>
      <th>Controversy Score_Alto</th>
      <th>Controversy Score_Bajo</th>
      <th>Controversy Score_Moderado</th>
      <th>Controversy Score_Severo</th>
      <th>Controversy Score_Significativo</th>
      <th>ESG Risk Level_High</th>
      <th>ESG Risk Level_Low</th>
      <th>ESG Risk Level_Medium</th>
      <th>ESG Risk Level_Negligible</th>
      <th>ESG Risk Level_Severe</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>ENPH</td>
      <td>Enphase Energy, Inc.</td>
      <td>3157.0</td>
      <td>21.502051</td>
      <td>5.732427</td>
      <td>6.72621</td>
      <td>9.042999</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>EMN</td>
      <td>Eastman Chemical Company</td>
      <td>14000.0</td>
      <td>25.300000</td>
      <td>12.800000</td>
      <td>6.60000</td>
      <td>5.800000</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>2</th>
      <td>DPZ</td>
      <td>Domino's Pizza Inc.</td>
      <td>6500.0</td>
      <td>29.200000</td>
      <td>10.600000</td>
      <td>6.30000</td>
      <td>12.200000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>3</th>
      <td>DVA</td>
      <td>Davita Inc.</td>
      <td>70000.0</td>
      <td>22.600000</td>
      <td>0.100000</td>
      <td>8.40000</td>
      <td>14.100000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
    <tr>
      <th>4</th>
      <td>DRI</td>
      <td>Darden Restaurants, Inc.</td>
      <td>187384.0</td>
      <td>27.500000</td>
      <td>7.900000</td>
      <td>4.60000</td>
      <td>15.000000</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>...</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>0.0</td>
      <td>1.0</td>
      <td>0.0</td>
      <td>0.0</td>
    </tr>
  </tbody>
</table>
<p>5 rows × 146 columns</p>
</div></div></div>
</div>
<p>Finalmente nos resulta esta tabla útil para los modelos.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">esgfinal</span><span class="o">.</span><span class="n">to_csv</span><span class="p">(</span><span class="s1">&#39;C:/Users/valcd/OneDrive/Escritorio/MachinelearningUN/edaproyecto/docs/esgfinal.csv&#39;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "python"
        },
        kernelOptions: {
            name: "python3",
            path: "./."
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'python3'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="prueba.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Librerías</p>
      </div>
    </a>
    <a class="right-next"
       href="modelos_retornos%5B1%5D.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><strong>MODELOS DE REGRESIÓN PARA LA PREDICCIÓN</strong></p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#librerias-y-modulos">Librerías y módulos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#contextualizacion-de-la-base-de-datos">Contextualización de la base de datos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-las-variables">Análisis de las variables</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deteccion-de-datos-faltantes-na">Detección de datos faltantes (NA)</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#deteccion-de-valores-atipicos">Detección de valores atípicos</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#analisis-de-multicolinealidad">Análisis de multicolinealidad</a></li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By The Jupyter Book Community
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2023.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>